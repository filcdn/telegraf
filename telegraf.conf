[agent]
  interval = "20s"
  round_interval = true
  metric_batch_size = 1000
  metric_buffer_limit = 10000
  collection_jitter = "0s"
  flush_interval = "10s"
  flush_jitter = "0s"
  precision = ""
  hostname = ""
  omit_hostname = false

# Mainnet → telegraf-mainnet bucket
[[outputs.influxdb_v2]]
  urls = ["https://eu-central-1-1.aws.cloud2.influxdata.com"]
  token         = "${INFLUX_TOKEN}"
  organization  = "FilCDN"
  bucket        = "telegraf-mainnet"
  [outputs.influxdb_v2.tagpass]
    environment = ["mainnet"]

# Calibration → telegraf-calibration bucket
[[outputs.influxdb_v2]]
  urls = ["https://eu-central-1-1.aws.cloud2.influxdata.com"]
  token         = "${INFLUX_TOKEN}"
  organization  = "FilCDN"
  bucket        = "telegraf-calibration"
  [outputs.influxdb_v2.tagpass]
    environment = ["calibration"]

[[inputs.exec]]
  commands = [
    "/opt/probes/wallet-screening-status.sh calibration ${CLOUDFLARE_CALIBRATION_DB_ID}",
    "/opt/probes/wallet-screening-status.sh mainnet ${CLOUDFLARE_MAINNET_DB_ID}",
  ]
  data_format = "influx"
  interval    = "1m"
  timeout     = "10s"
